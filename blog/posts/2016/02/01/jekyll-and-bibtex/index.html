<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Professor<br/> Université Paris Nanterre<br/> LIP6 (Sorbonne Université, CNRS)
">
    <meta name="author" content="Pascal Poizat">
    <title>Jekyll and BibTeX</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/css/main.css">
    <!-- OLD TODO : remove
    <link rel="canonical" href="http://pascalpoizat.github.io/blog/posts/2016/02/01/jekyll-and-bibtex/">
    -->
    <link rel="canonical" href="http://pascalpoizat.github.io/blog/posts/2016/02/01/jekyll-and-bibtex/">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/font-awesome-4.5.0/css/font-awesome.min.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- management of blocked Javascript -->
    <noscript>
        <style> .ifjavascript {
            display: none
        } </style>
    </noscript>
</head>

<body>

<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/index.html">pascal.poizat</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li >
                    <a class="navbar-link" href="/index.html">home</a>
                </li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li >
                    <a class="navbar-link" href="/teaching/">teaching</a>
                </li>
                
                
                
                <li >
                    <a class="navbar-link" href="/research/">research</a>
                </li>
                
                
                
                <li >
                    <a class="navbar-link" href="/duties/">duties</a>
                </li>
                
                
                
                <li >
                    <a class="navbar-link" href="/bio/">bio</a>
                </li>
                
                
                
                <li >
                    <a class="navbar-link" href="/blog/">blog</a>
                </li>
                
                
                
                <li >
                    <a class="navbar-link" href="/contact/">contact</a>
                </li>
                
                
                <!--
                <li>
                    <a class="navbar-link" href="/index.html#contact">contact</a>
                </li>
                -->
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>


<div class="container">
    <div class="post">

    <header class="post-header">
        <h1 class="post-title">Jekyll and BibTeX</h1>
        <p>
<a href="/blog/categories/jekyll">
    <button class="btn btn-xs btn-primary">
        jekyll <span class="badge">4</span>
    </button>
</a>

<a href="/blog/categories/bibtex">
    <button class="btn btn-xs btn-primary">
        bibtex <span class="badge">1</span>
    </button>
</a>

<a href="/blog/categories/jekyll-scholar">
    <button class="btn btn-xs btn-primary">
        jekyll-scholar <span class="badge">1</span>
    </button>
</a>
</p>
        <p class="post-meta">
            01 Feb 2016<br/>
            
        </p>
        <hr>
    </header>

    <article class="post-content">
        <p class="text-justify">Using <a href="http://jekyllrb.com">Jekyll</a>,
you can <a href="/blog/posts/2016/01/27/generating-a-page-using-personal-data/">generate pages based on your data</a>.<br />
With the additional help of <a href="https://github.com/inukshuk/jekyll-scholar">Jekyll-Scholar</a>,
this may include your BibTeX bibliographies.</p>

<h2 id="installing-jekyll-scholar">Installing Jekyll-Scholar</h2>

<p class="text-justify">First, if you are using GitHub Pages, you should do without the workflow,
see <a href="/blog/posts/2016/01/29/github-pages-without-the-workflow/">this post</a>,
since Jekyll-Scholar is not part of the authorized plugins.</p>

<p>Installing Jekyll-Scholar is then performed as follows:</p>

<ul>
  <li>run <code class="highlighter-rouge">gem install jekyll-scholar</code> and add <code class="highlighter-rouge">gems: ['jekyll/scholar']</code> in your <code class="highlighter-rouge">_config.yml</code> configuration file</li>
  <li>add <code class="highlighter-rouge">gem 'jekyll-scholar'</code> in your <code class="highlighter-rouge">Gemfile</code> file (if you are using the <a href="http://bundler.io/">Bundler</a> package manager)</li>
</ul>

<h2 id="basic-example">Basic example</h2>

<p class="text-justify">You can use a <code class="highlighter-rouge">_bibliography</code> directory to store your bibliography <code class="highlighter-rouge">.bib</code> files.
The <code class="highlighter-rouge">_</code> in the directory name means that Jekyll will not copy it in the generated site (<code class="highlighter-rouge">_site</code> by default).
If you want that your bibliography file is visible to your site visitors,
then you should take this into account and, e.g., store the file in a <code class="highlighter-rouge">bibliography</code> directory instead.
In the example we will suppose you have a <code class="highlighter-rouge">_bibliography/references.bib</code> file.</p>

<p class="text-justify">You can configure the way Jekyll-Scholar works using your <code class="highlighter-rouge">_config.yml</code> configuration file.
The default is (see <a href="https://github.com/inukshuk/jekyll-scholar">here</a> for the meaning of the contents):</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">scholar</span><span class="pi">:</span>
  <span class="na">style</span><span class="pi">:</span> <span class="s">apa</span>
  <span class="na">locale</span><span class="pi">:</span> <span class="s">en</span>

  <span class="na">sort_by</span><span class="pi">:</span> <span class="s">none</span>
  <span class="na">order</span><span class="pi">:</span> <span class="s">ascending</span>

  <span class="na">group_by</span><span class="pi">:</span> <span class="s">none</span>
  <span class="na">group_order</span><span class="pi">:</span> <span class="s">ascending</span>

  <span class="na">source</span><span class="pi">:</span> <span class="s">./_bibliography</span>
  <span class="na">bibliography</span><span class="pi">:</span> <span class="s">references.bib</span>
  <span class="na">bibliography_template</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>

  <span class="na">replace_strings</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">join_strings</span><span class="pi">:</span>    <span class="no">true</span>

  <span class="na">use_raw_bibtex_entry</span><span class="pi">:</span> <span class="no">false</span>

  <span class="na">details_dir</span><span class="pi">:</span>    <span class="s">bibliography</span>
  <span class="na">details_layout</span><span class="pi">:</span> <span class="s">bibtex.html</span>
  <span class="na">details_link</span><span class="pi">:</span>   <span class="s">Details</span>

  <span class="na">query</span><span class="pi">:</span> <span class="s2">"</span><span class="s">@*"</span></code></pre></figure>

<p class="text-justify">You may then perform queries in your <code class="highlighter-rouge">.html</code> or <code class="highlighter-rouge">.md</code> pages as follows:</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid">---
layout: default
title: publications
---

## Journal Articles

<span class="p">{%</span><span class="w"> </span><span class="nt">bibliography</span><span class="w"> </span>-q<span class="w"> </span>@article<span class="w"> </span><span class="p">%}</span>

## Book Chapters

<span class="p">{%</span><span class="w"> </span><span class="nt">bibliography</span><span class="w"> </span>-q<span class="w"> </span>@inbook<span class="w"> </span><span class="p">%}</span>

## Conferences and Workshops

<span class="p">{%</span><span class="w"> </span><span class="nt">bibliography</span><span class="w"> </span>-q<span class="w"> </span>@inproceedings<span class="w"> </span><span class="p">%}</span>

## Manuscripts

<span class="p">{%</span><span class="w"> </span><span class="nt">bibliography</span><span class="w"> </span>-q<span class="w"> </span>@phdthesis<span class="w"> </span><span class="p">%}</span></code></pre></figure>

<p class="text-justify">You may find more information about the bibliography queries <a href="https://github.com/inukshuk/jekyll-scholar">here</a>.</p>

<h2 id="tuning-things">Tuning things</h2>

<p>We will see how to achieve the following:</p>

<ul>
  <li>change the way references are ordered</li>
  <li>have our own citation style</li>
  <li>have output generated for additional bibliography fields (notes, DOI, HAL, and PDF)
and for the BibTeX reference itself</li>
</ul>

<h3 id="ordering-of-references">Ordering of references</h3>

<p class="text-justify">Say you want to have ordering by date of publication, in descending order.
Then you have to change your <code class="highlighter-rouge">_config.yml</code> file to include:</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">scholar</span><span class="pi">:</span>
  <span class="s">...</span>
  <span class="s">sort_by</span><span class="pi">:</span> <span class="s">year, month</span>
  <span class="na">order</span><span class="pi">:</span> <span class="s">descending</span>
  <span class="s">...</span></code></pre></figure>

<h3 id="citation-styles">Citation styles</h3>

<p class="text-justify">You can change the citation style by changing the style name for Jekyll-Scholar in <code class="highlighter-rouge">_config.yml</code>.
You can use styles from <a href="https://github.com/citation-style-language/styles">the repository for CSL citation styles</a>.
You can also define you own style and link to it as follows:</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">scholar</span><span class="pi">:</span>
  <span class="s">...</span>
  <span class="s">style</span><span class="pi">:</span> <span class="s">_bibliography/mystyle.csl</span>
  <span class="s">...</span></code></pre></figure>

<p class="text-justify">The definition of a style is quite complex. There is few documentation.
The best I could find is <a href="http://docs.citationstyles.org/en/stable/">here</a>.
The style I use is a modification of
<a href="http://www.zotero.org/styles/springer-lecture-notes-in-computer-science">http://www.zotero.org/styles/springer-lecture-notes-in-computer-science</a>
which you can see <a href="https://github.com/pascalpoizat/pascalpoizat.github.io/blob/master/src/_bibliography/mystyle.csl">here</a>.</p>

<h3 id="tuning-the-generated-output">Tuning the generated output</h3>

<p class="text-justify">The first thing is to tell Jekyll-Scholar which layout to use for bibliography queries.
We will have the description of it in <code class="highlighter-rouge">_layouts/bib.html</code> so we change <code class="highlighter-rouge">config.yml</code> to have:</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">scholar</span><span class="pi">:</span>
  <span class="s">...</span>
  <span class="s">bibliography_template</span><span class="pi">:</span> <span class="s">bib</span>
  <span class="s">...</span></code></pre></figure>

<p class="text-justify">Then you have to put the <code class="highlighter-rouge">bib.html</code> layout file in <code class="highlighter-rouge">_layouts</code> (the default):</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html">---
---
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"text-justify"</span><span class="nt">&gt;</span>
    {{reference}}
<span class="nt">&lt;/div&gt;</span>

{% if entry.note %}
<span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;em&gt;</span>{{ entry.note }}<span class="nt">&lt;/em&gt;</span>
<span class="nt">&lt;/div&gt;</span>
{% endif %}

<span class="nt">&lt;div&gt;</span>
    {% if entry.doi %}
    <span class="nt">&lt;span&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{{ entry.doi | prepend: 'http://doi.org/' }}"</span><span class="nt">&gt;</span>doi<span class="nt">&lt;/a&gt;&lt;/span&gt;</span>
    {% endif %}
    {% if entry.hal_id %}
    <span class="nt">&lt;span&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{{ entry.hal_id | prepend: 'http://hal.inria.fr/' }}"</span><span class="nt">&gt;</span>hal<span class="nt">&lt;/a&gt;&lt;/span&gt;</span>
    {% endif %}
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div&gt;</span>
    {% if entry.pdf %}
    <span class="nt">&lt;span&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{{ entry.pdf }}"</span><span class="nt">&gt;</span>pdf<span class="nt">&lt;/a&gt;&lt;/span&gt;</span>
    {% endif %}
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div&gt;&lt;pre&gt;</span>{{ entry.bibtex }}<span class="nt">&lt;/pre&gt;&lt;/div&gt;</span></code></pre></figure>

<p class="text-justify">The first thing is the layout information used by Jekyll (the two dash lines).
Then you have the <code class="highlighter-rouge">{{ reference }}</code> tag. It is used to include the reference as generated by Jekyll-Scholar.
Here we put it in a <code class="highlighter-rouge">&lt;div&gt;...&lt;/div&gt;</code> tag to have it text-justified.</p>

<p class="text-justify">Then we want to generate the reference note if there is some.
For this we use a Liquid conditional.
<code class="highlighter-rouge">entry</code> denotes the current reference we are typing out, and
<code class="highlighter-rouge">entry.note</code> denotes the note field of this entry (if it exists).</p>

<p class="text-justify">Then we have two <code class="highlighter-rouge">&lt;div&gt;</code>s. One for the links (DOI and the HAL open archive) and one for the PDF of the reference.
This uses respectively the <code class="highlighter-rouge">doi</code> (or <code class="highlighter-rouge">DOI</code>), <code class="highlighter-rouge">hal_id</code> (or <code class="highlighter-rouge">HAL_ID</code>), and <code class="highlighter-rouge">pdf</code> (or <code class="highlighter-rouge">PDF</code>) user-defined fields
in BibTeX reference files. Typically one would have references such as:</p>

<figure class="highlight"><pre><code class="language-latex" data-lang="latex">@Article<span class="p">{</span>PP<span class="p">_</span>MPS12,
    author = <span class="p">{</span>Mateescu, Radu and Poizat, Pascal and Salaün, Gwen<span class="p">}</span>,
    year = <span class="p">{</span>2012<span class="p">}</span>,
    title = <span class="p">{{</span>Adaptation of Service Protocols using Process Algebra and On-the-Fly Reduction Techniques<span class="p">}}</span>,
    journal = <span class="p">{</span>IEEE Transactions on Software Engineering<span class="p">}</span>,
    pages = <span class="p">{</span>755--777<span class="p">}</span>,
    volume = <span class="p">{</span>38<span class="p">}</span>,
    number = <span class="p">{</span>4<span class="p">}</span>,
    DOI = <span class="p">{</span>10.1109/TSE.2011.62<span class="p">}</span>,
    HAL<span class="p">_</span>ID = <span class="p">{</span>hal-00717252<span class="p">}</span>,
    PDF = <span class="p">{</span>https://hal.inria.fr/hal-00717252/document<span class="p">}</span>,
<span class="p">}</span></code></pre></figure>

<p class="text-justify"><strong>Note:</strong> if you want to use <code class="highlighter-rouge">{{ ... }}</code> in your BibTeX files (to force uppercase titles for example),
then you have to tell Jekyll-Scholar not to interpret this as Liquid templates.
This is achieved by putting in your <code class="highlighter-rouge">_config.yml</code> file:</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">scholar</span><span class="pi">:</span>
  <span class="s">...</span>
  <span class="s">use_raw_bibtex_entry</span><span class="pi">:</span> <span class="no">true</span>
  <span class="s">...</span></code></pre></figure>

<p class="text-justify">Last, but not least, if you want to end each reference with its BibTex source, e.g., to present them in a Boostrap pop-up),
then you can use <code class="highlighter-rouge">entry.bibtex</code>.</p>

<p class="text-justify">The overall result for the reference above (<strong>at the time of this post</strong>) is:</p>

<p><img src="/posts_images/2016-02-01-image1.png" alt="" /></p>

<p class="text-justify">As you can see, Jekyll-Scholar is a really interesting plugin.
To learn more, see <a href="https://github.com/inukshuk/jekyll-scholar">here</a>.</p>

    </article>

</div>

</div>

<div class="navbar navbar-default navbar-bottom">
    <div class="container">
        <h4>pascal.poizat</h4>
        <div class="row">
            <div class="col-md-4">
                <p>Professor<br/> Université Paris Nanterre<br/> LIP6 (Sorbonne Université, CNRS)
</p>
            </div>
            <div class="col-md-3">
                <p>
                    
                    <a href="mailto:firstname.lastname@lip6.fr">
                        firstname.lastname@lip6.fr
                    </a><br/>
                    
                    
                    <a href="mailto:firstname.lastname@parisnanterre.fr">
                        firstname.lastname@parisnanterre.fr
                    </a>
                    
                </p>
            </div>
            <div class="col-md-3">
                <p>
                    
                    <i class="fa fa-github-alt"></i>
                    <a href="https://github.com/pascalpoizat">
                        pascalpoizat
                    </a><br/>
                    
                    
                    <i class="fa fa-twitter"></i>
                    <a href="https://twitter.com/pascalpoizat">
                        pascalpoizat
                    </a><br/>
                    
                </p>
            </div>
        </div>
        <div class="footer-col-wrapper">
            <div class="footer-col-thanks">
                <p>
                    pages made with <a href="http://jekyllrb.com">Jekyll</a>,
                    <a class="button" href="http://github.com/pascalpoizat/pascalpoizat.github.io">
                        <button class="btn btn-xs btn-primary"><i
                                class="fa fa-download"></i> get source code
                        </button>
                    </a>
                </p>
            </div>
        </div>
    </div>
</div>


<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/javascripts/bootstrap.min.js"></script>


</body>

</html>
